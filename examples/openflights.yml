flows:
- file:
    path: https://raw.githubusercontent.com/jpatokal/openflights/master/data/airports.dat
    delimited:
      fields: AirportID, Name, City, Country, IATA, ICAO, Latitude, Longitude, Altitude, Timezone, DST, Tz, Type, Source
  writers:
  - redis:
      keyspace: airport
      keys: AirportID
  - redis:
      keyspace: airports:country
      keys: Country
      set:
        fields: AirportID
  - redis:
      keyspace: airports:geo
      geo:
        latitude: Latitude
        longitude: Longitude
        fields: AirportID
- file:
    path: https://raw.githubusercontent.com/jpatokal/openflights/master/data/airlines.dat
    delimited:
      fields: AirlineID, Name, Alias, IATA, ICAO, Callsign, Country, Active
  writers:
  - redis:
      keyspace: airline
      keys: AirlineID
  - redis:
      keyspace: airlines:country
      keys: Country
      set:
        fields: AirlineID
- file:
    path: https://raw.githubusercontent.com/jpatokal/openflights/master/data/routes.dat
    delimited:
      fields: Airline, AirlineID, SourceAirport, SourceAirportID, DestinationAirport, DestinationAirportID, Codeshare, Stops, Equipment
  writers:
  - redis:
      keyspace: route
      keys: Airline, SourceAirport, DestinationAirport
  - redis:
      keyspace: routes:equipment
      keys: Equipment
      set:
        fields: Airline, SourceAirport, DestinationAirport
- file:
    path: https://raw.githubusercontent.com/jpatokal/openflights/master/data/planes.dat
    delimited:
      fields: Name, IATA, ICAO
  writers:
  - redis:
      keyspace: plane
      keys: IATA, ICAO